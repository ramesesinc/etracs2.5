<workunit>
    <invokers>
        <invoker type="businessaccount:create" caption="Create Business Account" action="create"/>
        <invoker type="businessaccount:open" caption="View Business Account" action="open"/>
    </invokers>
    
    <code>
        <![CDATA[    
        import com.rameses.rcp.annotations.*
        import com.rameses.rcp.common.*
        import com.rameses.osiris2.client.*
        import com.rameses.osiris2.common.*
        
        class  BPLSCollectionTypeController extends CRUDController {

            @Service("BusinessAccountService")
            def service;
            
            boolean allowApprove = false;
            
            def taxfeeTypes = ["TAX", "REGFEE", "OTHERCHARGE", "TAXCREDIT"];
            def paymentModes = ["YEAR", "QTR"];
            def extDepts = LOV.BUSINESS_EXT_DEPT;
            
            def getLookupAccount() {
                return InvokerUtil.lookupOpener("revenueitem:lookup", [
                    onselect: { o->
                        entity.objid = o.objid;
                        entity.code = o.code;
                        entity.title = o.title;
                    }
                ]); 
            }
            
            def getLookupSurchargeAccount() {
                return InvokerUtil.lookupOpener("revenueitem:lookup", [
                    onselect: { o->
                        entity.surcharge = [objid:o.objid, code:o.code, title:o.title];
                    }
                ]); 
            }
            
            def getLookupInterestAccount() {
                return InvokerUtil.lookupOpener("revenueitem:lookup", [
                    onselect: { o->
                        entity.interest = [objid:o.objid, code:o.code, title:o.title];
                    }
                ]); 
            }
        }
        ]]>
        
    </code>
    
    <pages>
        <page template="com.rameses.gov.etracs.bpls.account.BusinessAccountPage"/>
    </pages>
    
</workunit>