<workunit>
    <invokers>
        <invoker type="quick_launcher" action="create" code="VAR01" caption="Variables" role="MASTER_ENCODER" permission="variable.create"/>
        <invoker type="variable:create" action="init" caption="Variable" />
        <invoker type="variable:open" action="open" caption="Variable" />
    </invokers>
    <code>
<![CDATA[

import com.rameses.rcp.common.*;
import com.rameses.rcp.annotations.*;
import com.rameses.osiris2.client.*;
import com.rameses.osiris2.common.*

class MasterVariableController extends CRUDController
{
    
    String serviceName = 'VariableMasterService'
    String entityName  = 'variable'
    String prefixId    = 'VAR';
    def dataTypes = LOV.BUSINESS_VAR_TYPE
    
    def arrayvalue 
    
    void doAdd() {
        def value = MsgBox.prompt('Enter value:')
        if( ! value || value.toString() == 'null') return 

        if( ! entity.arrayvalues) entity.arrayvalues = []
        if( ! entity.arrayvalues.contains( value ) ) {
            entity.arrayvalues.add( value.toUpperCase() )
        }
    }
    
    void doRemove() {
        if( MsgBox.confirm('Remove selected item?') ) {
            entity.arrayvalues.remove( arrayvalue )
        }
    }
}


]]>        
        
    </code>
    <pages>
        <page name="main" template="com.rameses.gov.etracs.bpls.variable.VariablePage"/>
    </pages>
</workunit>