<workunit>
    <invokers>       
        <invoker type="quick_launcher" code="LOB01" action="create" caption="Line of Business" xrole="MASTER_ENCODER" xpermission="lob.create"/>
        <invoker type="lob:create" action="init" caption="Line of Business" />
        <invoker type="lob:open" action="open" caption="Line of Business" />
    </invokers>
    <code>
        <![CDATA[

        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        import com.rameses.osiris2.common.*

        class LobController extends CRUDController
        {   

            String serviceName = 'LobService'
            String entityName  = 'lob'
            String prefixId    = 'LOB';
            
            def selectedItem;
            
            Map createEntity() {
                return [ attributes:[] ]
            }
            
            def listHandler = [
                fetchList: {o->
                    return entity.attributes
                },
                onAddItem: {o->
                    if( entity.attributes.find{ it.objid == o.objid } )
                        throw new Exception("You have already added this attribute.")
                    entity.attributes.add(o)
                },
                onRemoveItem: {o->
                    if( MsgBox.confirm("You are about to delete this attribute. Continue?") ) {
                        entity.attributes.remove(o)
                        return true
                    }
                    return false
                }
            ] as EditorListModel;
        }
        ]]>        
        
    </code>
    <pages>
        <page name="main" template="com.rameses.gov.etracs.bpls.lob.LobPage"/>
    </pages>
</workunit>