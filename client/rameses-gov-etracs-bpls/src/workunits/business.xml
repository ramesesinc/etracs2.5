<workunit>
    <invokers>
        <invoker type="business:open" caption="Business Info" action="open" target="window" role="BUSINESSINFO,ASSESSOR,LICENSING"/>
       
        <invoker type="formActions" caption="Close"  action="_close" />

    </invokers>
    
    
    <code>
        <![CDATA[    
        import com.rameses.rcp.annotations.*
        import com.rameses.rcp.common.*
        import com.rameses.osiris2.client.*
        import com.rameses.osiris2.common.*
        import java.rmi.server.*
        import com.rameses.gov.etracs.bpls.business.*;
        
        class  BusinessInfoController  {
        
            @Service("BusinessInfoService")
            def service;
            
            @FormId
            def formId
            
            @FormTitle
            def formTitle
            
            String title;
            def entityName = "business";
            def entity;
            def currentSection;
            def orgTypes = LOV.ORG_TYPES;
            
            def sections;
            
            def open() {
                entity = service.open(entity);
                entity.orgtypename = orgTypes.find{ it.key == entity.orgtype}?.value;
                sections = InvokerUtil.lookupOpeners( "business:info", [entity: entity ] );
                formId = entity.bin;
                formTitle = entity.bin;
                title = entity.businessname + ((entity.bin)? ' ['+entity.bin+']' : '');
                if(sections.size()>0) currentSection = sections[0];
            }
        }
        ]]>
    </code>
    <pages>
        <page template="com.rameses.gov.etracs.bpls.business.BusinessInfoPage"/>
    </pages>
    
</workunit>