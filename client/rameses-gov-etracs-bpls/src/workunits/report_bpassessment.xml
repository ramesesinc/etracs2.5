<workunit >
    <invokers>
        <!--
       <invoker type="home.action" caption="BP Assessment" action="viewReport" target="window"/>
       <invoker type="formActions" caption="Back" action="_close" mnemonic="b" shortcut="ctrl B" /> 
       -->
    </invokers>
    
    <code>
        <![CDATA[    
        import com.rameses.rcp.annotations.*
        import com.rameses.rcp.common.*
        import com.rameses.osiris2.client.*
        import com.rameses.osiris2.common.*
        import java.rmi.server.*;
         import com.rameses.osiris2.reports.*;
        
        class  BPAssessmentReportController  {
        
            def entity;
        
            def title = "BP Assessement"
            
            def reportPath = "com/rameses/gov/etracs2/bpls/reports/assessment/"
            
            @Service("ReportParameterService") 
            def paramsvc
         
            void viewReport() {
                // sample data 
                entity = [
                   txnno: "FAR000059358", tradename:"EDUARDO C. GERASMIO", businessaddress:"PRK. SAN JOSE, MAHAYAHA",
                   taxpayername: "GERASMIO, EDUARDO C", taxpayeraddress:"PALM COURT SUBD., TOMAS CABILI ILIGAN CITY",
                   txndate: java.sql.Date.valueOf("2013-02-27"), ctcno: "CCI2012-191919191", ctcdate: java.sql.Date.valueOf("2013-02-01"),
                   totaltax:2090.00, totalregfee:132.00, totalcharge:1246.00, totalamount:3468.00, laterenewal:"0", 
                   applications: [
                        taxes:[ [lobname:"SARI-SARI", accttitle:"BUSINESS TAX", amtdue:2090.00, amount: 759000.00, assessmenttype:"RENEWAL"  ] ],
                        regfees:[ [lobname:"SARI-SARI", accttitle:"SANITARY PERMIT", amtdue:22.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"MAYOR'S PERMIT", amtdue:110.00, amount: 0.00, assessmenttype:"RENEWAL"  ] ], 
                        charges:[ [lobname:null, accttitle:"BUSINESS PLATE STICKER", amtdue:5.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"C.O. No. 10-5664 - BP", amtdue:200.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"ICBRD-CCIFII", amtdue:100.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"GARBAGE FEE C.O. 11-5673", amtdue:320.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"BUILDING INSPECTION FEE", amtdue:120.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"ELECTRICAL INSPECTION FEE", amtdue:296.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"PLUMBING INSPECTION FEE", amtdue:60.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"SINGBOARD/BILLBOARD", amtdue:20.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"HEALTH FEE", amtdue:75.00, amount: 0.00, assessmenttype:"RENEWAL"  ],
                                  [lobname:null, accttitle:"VERIFICATION FEE", amtdue:50.00, amount: 0.00, assessmenttype:"RENEWAL"  ]]
                   ]
                ]
            
                report.viewReport();
            } 
            
            def report = [
                getReportName : { return reportPath + "Assessment.jasper" },
                getReportData : { return  entity },
                getParameters : { return paramsvc.getStandardParameter() },
                getSubReports : { return [
                        new SubReport("AssessmentItem", reportPath + "AssessmentItem.jasper"),
                        new SubReport("SignatoryItem", reportPath + "SignatoryItem.jasper"),
                        new SubReport("AssessmentNonTax", reportPath + "AssessmentNonTax.jasper")
                    ] as SubReport[];
                }
            ] as ReportModel
           
        }
        ]]>
        
    </code>
    
    <pages>
        <page template="com.rameses.osiris2.common.ui.ReportPreviewPage"/>
    </pages>
    
</workunit>