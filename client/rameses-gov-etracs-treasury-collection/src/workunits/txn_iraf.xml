<?xml version="1.0" encoding="UTF-8"?>
<workunit>
    <invokers>
        <invoker type="iraf:create" action="init" caption="IRAF"/>
        <invoker type="iraf:open" action="open" caption="IRAF"/>
    </invokers>
    <code class="com.rameses.gov.etracs.treasury.collection.af.controllers.IRAFTxnController"/>
    <pageflow>
        <start>
            <transition to="default"/>
        </start>
        <page name="default">
            <transition to="end" name="Close" visibleWhen="#{mode == 'view'}"/>
            <transition to="init" name="New" visibleWhen="#{mode == 'view'}"/>
            <transition to="edit" name="Edit" visibleWhen="#{mode == 'view' and entity.state == 'DRAFT'}"/>
            <transition to="delete" name="Delete" visibleWhen="#{mode == 'view' and entity.state != 'CLOSED'}"/>
            <transition to="approve" name="Approve" visibleWhen="#{mode == 'view' and entity.state == 'DRAFT'}"/>
            <transition to="cancel" name="Cancel" visibleWhen="#{mode != 'view'}"/>
            <transition to="save" name="Save" visibleWhen="#{mode != 'view'}" immediate="false"/>
            
            <transition to="report" action="viewRIV" name="View RIV" visibleWhen="#{mode != 'create'}"/>
            <!--
            <transition to="report" action="viewRIS" name="View RIS" visibleWhen="#{mode != 'create'}"/>
            -->
        </page>
        <page name="report">
            <transition to="default" name="Back"/>
        </page>
        <process name="init">
            <transition to="default" action="create"/>
        </process>
        <process name="save">
            <transition to="default" action="save"/>
        </process>
        <process name="edit">
            <transition to="default" action="edit"/>
        </process>
        <process name="delete">
            <transition to="end" action="delete"/>
        </process>
        <process name="approve">
            <transition to="default" action="approve"/>
        </process>
        <process name="cancel">
            <transition to="default" cond="#{prevEntity != null}" action="cancel"/>
            <transition to="end" cond="#{prevEntity == null}"/>
        </process>
        <end />
    </pageflow>
    <pages>
        <page template="com.rameses.gov.etracs.treasury.collection.af.IRAFPage"/>
    </pages>
</workunit>