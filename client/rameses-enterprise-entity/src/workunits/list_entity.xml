<?xml version="1.0" encoding="UTF-8"?>
<workunit extends="wtemplates/ListController.xml">
    <invokers>
        <invoker folderid="/explorer/txnmgmt/entity" caption="Entities" index="20" xrole="ENTITY_ENCODER" xpermission="entity.manage" />
        
        <invoker type="formActions" caption="Individual" action="initIndividual" xrole="ENTITY_ENCODER" xpermission="individual.create"/>        
    </invokers>
    <code>
        <![CDATA[
            import com.rameses.rcp.common.*
            import com.rameses.rcp.annotations.*
            import com.rameses.osiris2.client.*
            import com.rameses.osiris2.common.*
            
            class EntityListController extends ListController 
            {
                String serviceName = 'EntityListService'
                String entityName = ''
                public boolean isAllowCreate() { return false }
                
                Opener initIndividual() {
                    entityName = 'entityindividual'
                    return create()
                }
                
                public Object open() {
                    entityName = 'entity'+selectedEntity.type
                    return super.open()
                }
                
                Column[] getColumns() {
                    return [ 
                        new Column(name:"entityno", caption:"Entity No.", maxWidth:70),
                        new Column(name:"name", caption:"Name"),
                        new Column(name:"address", caption:"Address")
                    ] as Column[]
                }
            }
        ]]>
    </code>
</workunit>