import com.rameses.common.*
import com.rameses.annotations.*

class ResectionListService 
{
	@PersistenceContext('rpt')
	def em 
	
	@Service('RPTUtil')
	def util


	@ProxyMethod
    public def getList( params ) {
    	params.searchtext = (params.searchtext ? params.searchtext : '') + '%'
        def filters = [
            'WHERE r.txnno LIKE $P{searchtext}',
            'WHERE r.sectionno LIKE $P{searchtext}',
            'WHERE b.name LIKE $P{searchtext}',
            'WHERE r.appraiser_name LIKE $P{searchtext}',
        ]
        return util.getListFromQuery( 'resection:getList' , filters, params, 'r.objid' )
    }


    @ProxyMethod
	public def getColumns( params ) {
		return [ 
			[name:'state', caption:'State'],
			[name:'txnno', caption:'Txn No.'],
			[name:'pintype', caption:'PIN Type'],
			[name:'barangay', caption:'Barangay'],
			[name:'section', caption:'Resectioned Section'],
			[name:'appraiser.name', caption:'Appraiser'],
			[name:'appraiser.title', caption:'Job Position'],
		]	
	}
}